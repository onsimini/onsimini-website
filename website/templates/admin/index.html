{% extends 'admin/base.html' %}

{% block admin_content %}
<div class="container">
    <div class="row justify-content-end">
        <div class="col-3">
            <div class="container media" style="padding-top: 3px;">
                <span style="padding-right: 10px; padding-top: 3px;">
                    {{ g.user['username'] }}
                </span>
                <form action = "{{ url_for('admin.admin') }}" method = "post">
                    <input name = "logout" type = "submit" value = "logout" />
                </form>
            </div>
        </div>
    </div>
    <div class="row" style="padding: 10px; border: 1px solid black; margin: 10px;">
        <div class="col">
        Var liste:
        <ul>
            {% for var in var_site %}
                <li>
                    {{ var['varname'] }},
                    <form action = "{{ url_for('admin.update_site_variable') }}" method="post">
                        <input type="hidden" name="varname" value="{{  var['varname'] }}">
                        <input type="text" name="varvalue" value="{{ var['varvalue'] }}" required>
                        <input type="submit" value="Save">
                    </form>
                </li>
            {% endfor %}
        </ul>
        </div>
    </div>
    <div class="row" style="padding: 10px; border: 1px solid black; margin: 10px;">
        <div class="col">
            Add Post:
            <form action = "{{ url_for('admin.add_post') }}" method="post">
                <input type="text" name="title">
                <textarea id="summernote" name="editordata"></textarea>
                <input type="submit" value="Save">
            </form>
        </div>
    </div>
    <div class="row" style="padding: 10px; border: 1px solid black; margin: 10px;">
        <div class="col">
        Posts liste:
        <ul>
            {% for post in posts %}
                <li>{{ post['title'] }}, {{ post['created'] }}, {{ post['username'] }}</li>
            {% endfor %}
        </ul>
        </div>
    </div>
    <div class="row" style="padding: 10px; border: 1px solid black; margin: 10px;">
        <div class="col">
            User liste:
            <ul style="display: inline;">
                {% for user in users %}
                    <li>
                        <h5>{{ user['username'] }}</h5>
                        <form action = "{{ url_for('admin.delete_user') }}" method = "post">
                            <input type="hidden" name="user" value="{{ user['username'] }}">
                            <input name = "{{ user['username'] }}_Delete" type = "submit" value = "Delete" />
                        </form>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <div class="row" style="padding: 10px; border: 1px solid black; margin: 10px;">
        <div class="col">
            Add an User: 
            <form action = "{{ url_for('admin.register') }}" method="post">
                <label for="username">Username</label>
                <input name="username" id="username" required>
                <label for="password">Password</label>
                <input type="password" name="password" id="password" required>
                <input type="submit" value="Register">
            </form>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $('#summernote').summernote();
    });
</script>
{% endblock %}
